<div class="d-flex justify-content-between align-items-center">
  <h1>Professor</h1>
  <% if user_signed_in? && current_user.teacher == @teacher %>
    <a href="#" class="btn btn-success">Editar perfil</a>
  <% end %>
</div>

<hr />
<div class="row my-4">
  <div class="col-5 text-center">
    <% if @teacher.user.gender == :male %>
      <%= image_tag 'http://i64.tinypic.com/344qrzd.jpg', class: 'img-fluid' %>
    <% else %>
      <%= image_tag 'http://i64.tinypic.com/2im57q9.png', class: 'img-fluid' %>
    <% end %>
  </div>

  <div class="col-7">
    <h2><%= @teacher.user.name %></h2>

    <%= render 'teachers/information' %>

    <div class="mt-3">
      <% if user_signed_in? &&
          @teacher.teaches?(current_user.student) &&
          !current_user.student.rated_teacher?(@teacher) %>
        <%= link_to 'Avaliar', new_teacher_rating_path(teacher_id: @teacher.id),
                    class: 'btn btn-primary' %>
      <% end %>

      <% if user_signed_in? && current_user != @teacher.user %>
        <% if current_user.student.following?(@teacher) %>
          <%= link_to 'Deixar de seguir', unfollow_teacher_student_path(teacher_id: @teacher.id),
                      class: 'btn btn-danger' %>
        <% else %>
          <%= link_to 'Seguir', follow_teacher_student_path(teacher_id: @teacher.id),
                      class: 'btn btn-success' %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<hr />

<h2 class="mb-3">Turmas</h2>
<%= render partial: 'courses/courses', locals: { courses: @teacher.courses } %>

<hr />

<h3 class="mb-3">Avaliações</h3>
<% if @teacher.teacher_ratings.exists? %>
  <%= render partial: 'teacher_ratings/ratings',
             locals: { rates: @teacher.teacher_ratings } %>
<% else %>
  <div class="alert alert-warning">Professor(a) ainda não tem avaliações.</div>
<% end %>

<% if user_signed_in? && current_user.teacher == @teacher && @teacher.followers_count > 0 %>
  <hr />
  <h3 class="mb-3">Seguidores</h3>
  <ul>
    <% @teacher.followers.each do |student| %>
      <li><%= link_to student.user.name, student_path(student) %></li>
    <% end %>
  </ul>


<% end %>