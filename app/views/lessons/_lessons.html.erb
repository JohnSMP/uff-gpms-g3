<% if @course.lessons.any? %>
  <ul class="list-group">
    <% @course.lessons.each do |lesson| %>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <h5><%= lesson.title %></h5>
        <% if lesson.lesson_students.by_student(current_user.student).present? %>
          <div class="alert alert-success mb-0">Assistida!</div>
        <% end %>
        <div>
          <% if can? :show, lesson %>
            <%= link_to 'Assistir aula', lesson_path(lesson), class: 'btn btn-primary' %>
          <% end %>
          <% if can? :edit, lesson %>
            <%= link_to 'Editar', edit_lesson_path(lesson), class: 'btn btn-primary' %>
          <% end %>
          <% if can? :destroy, lesson %>
            <%= link_to 'Excluir', lesson_path(lesson), method: :delete,
                        data: { confirm: 'Tem certeza?' }, class: 'btn btn-danger' %>
          <% end %>
        </div>
      </li>
    <% end %>
  </ul>
<% else %>
  <div class="alert alert-warning">Esse curso ainda n√£o tem aulas.</div>
<% end %>